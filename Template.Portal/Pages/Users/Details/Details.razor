@page "/user/details/{userId}"
@inherits BasePage



<PartaialPageTitle Header="User Details" Title="User Details">
    <Content>
        <PartialModal ButtonCSS="float-right btn btn-info btn-sm mr-1"
                      Button="Update Roles"
                      Heading="Update Roles"
                      Id="UpdateRoles"
                      Size="modal-xl"
                      ShowFooter="false">
            <Content>
                <UpdateUserRole UserId="@UserId"></UpdateUserRole>
            </Content>
        </PartialModal>
        <PartialModal ButtonCSS="float-right btn btn-info btn-sm mr-1"
                      Button="Update Claims"
                      Heading="Update Claims"
                      Id="UpdateClaims"
                      Size="modal-xl"
                      ShowFooter="false">
            <Content>
                <UpdateUserClaim UserId="@UserId"></UpdateUserClaim>
            </Content>
        </PartialModal>
    </Content>
</PartaialPageTitle>

<style>
    /* small styling purely for visual polish */
    .avatar {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-size: 40px;
        font-weight: 600;
        color: white;
        background: linear-gradient(135deg,#6f42c1,#0d6efd);
    }

    .meta-label {
        font-weight: 600;
        color: #495057;
    }

    .muted-small {
        font-size: .9rem;
        color: #6c757d;
    }

    .claim-badge {
        margin-right: .35rem;
        margin-bottom: .35rem;
    }
</style>



<div class="col-lg-12">
    <div class="card shadow-sm">
        <div class="card-body">
            <div class="d-flex flex-column flex-md-row align-items-center gap-4">
                <!-- Left: Avatar + name -->
                <div class="text-center text-md-start">
                    <div class="avatar mb-2 mx-auto mx-md-0">AD</div>
                    <h4 class="mb-0">admin admin</h4>
                    <p class="muted-small mb-0">Administrator</p>
                    <div class="mt-3">
                        <button class="btn btn-primary btn-sm me-2">Edit profile</button>
                        <button class="btn btn-outline-secondary btn-sm">Reset password</button>
                    </div>
                </div>

                <!-- Right: Info -->
                <div class="flex-fill">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <h6 class="mb-1">Account overview</h6>
                            <p class="muted-small mb-2">Quick summary and account metadata</p>
                        </div>
                        <div class="text-end">
                            <!-- status badges -->
                            <span class="badge bg-success me-1">Active</span>
                            <span class="badge bg-info">Role: Admin</span>
                        </div>
                    </div>

                    <div class="row g-3 mt-1">
                        <!-- left column: details -->
                        <div class="col-md-6">
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item px-0 py-2">
                                    <span class="meta-label">User ID</span>
                                    <div class="muted-small">feba6c0a-e24c-4410-a8c2-0145bd3d1853</div>
                                </li>
                                <li class="list-group-item px-0 py-2">
                                    <span class="meta-label">Created</span>
                                    <div class="muted-small">2025-08-28T11:33:42.2319905 (UTC)</div>
                                </li>
                                <li class="list-group-item px-0 py-2">
                                    <span class="meta-label">Last updated</span>
                                    <div class="muted-small">—</div>
                                </li>
                                <li class="list-group-item px-0 py-2">
                                    <span class="meta-label">Account locked manually?</span>
                                    <div class="muted-small">false</div>
                                </li>
                                <li class="list-group-item px-0 py-2">
                                    <span class="meta-label">Failed login attempts</span>
                                    <div class="muted-small">0</div>
                                </li>
                            </ul>
                        </div>

                        <!-- right column: roles, claims, flags -->
                        <div class="col-md-6">
                            <div class="mb-3">
                                <span class="meta-label">Roles</span>
                                <div class="mt-2">
                                    <!-- roles -->
                                    <span class="badge bg-primary me-1">Admin</span>
                                </div>
                            </div>

                            <div class="mb-3">
                                <span class="meta-label">Claims / Permissions</span>
                                <div class="mt-2">
                                    <!-- claims -->
                                    @if(User?.Claims?.Count > 0)
                                    {
                                        @foreach (var claim in User.Claims)
                                        {
                                            <span class="badge bg-secondary claim-badge">@claim</span>
                                        }
                                    }                                    
                                    
                                </div>
                            </div>

                            <div class="mb-3">
                                <span class="meta-label">Status flags</span>
                                <div class="mt-2">
                                    <span class="muted-small d-block">Password never expires: <strong>false</strong></span>
                                    <span class="muted-small d-block">Password expiry date: <strong>—</strong></span>
                                    <span class="muted-small d-block">Is deleted: <strong>false</strong></span>
                                </div>
                            </div>

                            <div class="mt-3">
                                <button class="btn btn-outline-danger btn-sm">Disable account</button>
                                <button class="btn btn-outline-dark btn-sm ms-2">Audit activity</button>
                            </div>
                        </div>
                    </div>



                </div>
            </div>
        </div> <!-- card-body -->
    </div> <!-- card -->
</div>

<!-- Bootstrap JS (optional for some components like dropdowns) - not required for this page -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

